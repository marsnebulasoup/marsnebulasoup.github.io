<html>

<head>
	<link href="css/bulma_custom/css/mystyles.css" rel="stylesheet" />
</head>

<body style="background-color:black">
	<style>
		.hints-li {
			display: initial;
		}

		.hints-li ul {
			padding-top: 2%;
			padding-left: 0.1%;
			padding-bottom: 4%;
			/* border: 2px solid white; */
			/* border-radius: 10px; */
		}

		.hints-hints li {
			padding: 2%;
			border-radius: 5px;
		}

		.selected {
			opacity: 0.7;
			background-color: #1f1f1f;
		}

		.hints-hints li:hover {
			opacity: 0.8;
			background-color: #171717;
		}


		.hints-container {
			border: 2px solid #cccccc;
			border-radius: 32px;
		}

		.hints-searchbar {
			border-color: transparent !important;
		}

		.hints-searchbar-focus,
		.hints-searchbar:focus {
			border-top: none !important;
			border-left: none !important;
			border-right: none !important;
			border-bottom: 2px solid #cccccc !important;
			border-top-left-radius: 32px !important;
			border-top-right-radius: 32px !important;
			border-bottom-left-radius: 0px !important;
			border-bottom-right-radius: 0px !important;
		}
	</style>

	<div style=" width:30%; margin: 10%;">
		<ul id="hints-container" class="hints-container">
			<li>
				<input id="hints-searchbar" class="input is-rounded is-large hints-searchbar" placeholder="Search"
					autofocus></input>
				<div class="hints-li">
					<ul id="hints-hints" class="hints-hints">
						<li style="height: 0 !important; padding: 0 !important;"></li>
						<li>
							<p>The fallen grave</p>
						</li>
						<li>
							<p>The fallen grave</p>
						</li>
						<li>
							<p>The fallen grave</p>
						</li>
						<li>
							<p>The fallen grave</p>
						</li>
						<li>
							<p>The fallen grave</p>
						</li>
					</ul>
				</div>
			</li>

		</ul>

	</div>

	<script>
		var ul = document.getElementById('hints-hints');
		var nodes = ul.querySelectorAll('li');
		var selected = 0;


		document.addEventListener('keydown', function (e) {
			if (e.keyCode === 38) { // up
				e.preventDefault();
				select(nodes[selected - 1]);
			}
			if (e.keyCode === 40) { // down
				e.preventDefault();
				select(nodes[selected + 1]);
			}
		});

		function select(el) {
			var s = [].indexOf.call(nodes, el);
			if (s === -1) return;

			selected = s;

			var elHeight = parseFloat(getComputedStyle(el, null).height.replace("px", ""))
			var scrollTop = ul.scrollTop;
			var viewport = scrollTop + parseFloat(getComputedStyle(ul, null).height.replace("px", ""))
			var elOffset = elHeight * selected;

			console.log('select', selected, ' viewport', viewport, ' elOffset', elOffset);
			/* if (elOffset < scrollTop || (elOffset + elHeight) > viewport)
			  $(ul).scrollTop(elOffset); */

			var currentselected = document.querySelector('li.selected');
			console.log(currentselected)
			if (currentselected != null && currentselected.classList.contains("selected")) {
				currentselected.classList.remove('selected');
			}
			el.classList.add('selected');
		}



		function setFocused() {
			var searchbar = document.getElementById("hints-searchbar");
			var hints = document.getElementById("hints-hints");
			if (!searchbar.classList.contains("hints-searchbar-focus")) {
				hints.style.display = "initial";
				searchbar.classList.add("hints-searchbar-focus");
			}
		}

		function unsetFocused() {
			var searchbar = document.getElementById("hints-searchbar");
			var hints = document.getElementById("hints-hints");
			searchbar.classList.remove("hints-searchbar-focus");
			hints.style.display = "none";
		}

		var specifiedElement = document.getElementById('hints-container');
		document.addEventListener('click', function (event) {
			var isClickInside = specifiedElement.contains(event.target);
			if (isClickInside) {
				console.log("IN");
				setFocused();
			}
			else {
				console.log("Out");
				unsetFocused();
			}
		});
	//searchbar.addEventListener("focus", setFocused);
	//result.addEventListener("blur", unsetFocused);

	</script>
</body>

</html>